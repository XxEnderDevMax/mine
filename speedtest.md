const _0x597140=_0x1c4e;(function(_0xaa555a,_0xa8e063){const _0x27d0e9=_0x1c4e,_0x497815=_0xaa555a();while(!![]){try{const _0x149fa8=-parseInt(_0x27d0e9(0x18b))/0x1+-parseInt(_0x27d0e9(0x1b2))/0x2+-parseInt(_0x27d0e9(0x168))/0x3+-parseInt(_0x27d0e9(0x161))/0x4*(parseInt(_0x27d0e9(0x17b))/0x5)+parseInt(_0x27d0e9(0x1a8))/0x6*(parseInt(_0x27d0e9(0x15b))/0x7)+parseInt(_0x27d0e9(0x18a))/0x8+parseInt(_0x27d0e9(0x179))/0x9;if(_0x149fa8===_0xa8e063)break;else _0x497815['push'](_0x497815['shift']());}catch(_0x13e39e){_0x497815['push'](_0x497815['shift']());}}}(_0x4263,0x42506));import{connect}from'cloudflare:sockets';let userID='d342d11e-d424-4583-b36e-524ab1f0afa4';const proxyIP=[_0x597140(0x164),_0x597140(0x1af),'whoer.net',_0x597140(0x19f),_0x597140(0x195),_0x597140(0x1a5),_0x597140(0x19b),_0x597140(0x1a0),'deepseek.com',_0x597140(0x194),'v2ray.com',_0x597140(0x199),_0x597140(0x159),_0x597140(0x14f),_0x597140(0x198),_0x597140(0x151),'my-telegram-is-herocore.onecf.eu.org','proxyip.us.fxxk.dedyn.io',_0x597140(0x177),'proxyip.aliyun.fxxk.dedyn.io',_0x597140(0x16e),_0x597140(0x153)];if(!isValidUUID(userID))throw new Error(_0x597140(0x16c));export default{async 'fetch'(_0x3e007d,_0x1d4ec3,_0x4c5ef7){const _0x214cef=_0x597140;try{userID=_0x1d4ec3['UUID']||userID,proxyIP=_0x1d4ec3[_0x214cef(0x189)]||proxyIP;const _0x5ce72e=_0x3e007d['headers'][_0x214cef(0x1ad)]('Upgrade');if(!_0x5ce72e||_0x5ce72e!==_0x214cef(0x150)){const _0x261c57=new URL(_0x3e007d[_0x214cef(0x178)]);switch(_0x261c57['pathname']){case'/':return new Response(JSON[_0x214cef(0x15e)](_0x3e007d['cf']),{'status':0xc8});case'/'+userID:{const _0x44bee8=getVLESSConfig(userID,_0x3e007d[_0x214cef(0x191)][_0x214cef(0x1ad)](_0x214cef(0x196)));return new Response(''+_0x44bee8,{'status':0xc8,'headers':{'Content-Type':'text/plain;charset=utf-8'}});}default:return new Response(_0x214cef(0x1a9),{'status':0x194});}}else return await vlessOverWSHandler(_0x3e007d);}catch(_0x52abcc){let _0x2c1cdb=_0x52abcc;return new Response(_0x2c1cdb[_0x214cef(0x18d)]());}}};async function vlessOverWSHandler(_0x3ab094){const _0x235734=_0x597140,_0x5e03db=new WebSocketPair(),[_0x24e9ae,_0x4ff6b9]=Object[_0x235734(0x186)](_0x5e03db);_0x4ff6b9[_0x235734(0x156)]();let _0x4ca85d='',_0xfd6f34='';const _0x3d11ea=(_0x39f078,_0x25f570)=>{console['log']('['+_0x4ca85d+':'+_0xfd6f34+']\x20'+_0x39f078,_0x25f570||'');},_0x1d72b4=_0x3ab094[_0x235734(0x191)][_0x235734(0x1ad)](_0x235734(0x19e))||'',_0x338e10=makeReadableWebSocketStream(_0x4ff6b9,_0x1d72b4,_0x3d11ea);let _0x59f309={'value':null},_0x115154=null,_0x2ca4e0=![];return _0x338e10[_0x235734(0x185)](new WritableStream({async 'write'(_0x3d9f75,_0x212e34){const _0x22f822=_0x235734;if(_0x2ca4e0&&_0x115154)return _0x115154(_0x3d9f75);if(_0x59f309[_0x22f822(0x16f)]){const _0x22517e=_0x59f309['value'][_0x22f822(0x158)][_0x22f822(0x1b0)]();await _0x22517e[_0x22f822(0x18c)](_0x3d9f75),_0x22517e[_0x22f822(0x184)]();return;}const {hasError:_0x5e5f07,message:_0x3b3363,portRemote:portRemote=0x1bb,addressRemote:addressRemote='',rawDataIndex:_0x559623,vlessVersion:vlessVersion=new Uint8Array([0x0,0x0]),isUDP:_0x412ec9}=processVlessHeader(_0x3d9f75,userID);_0x4ca85d=addressRemote,_0xfd6f34=portRemote+'--'+Math[_0x22f822(0x15c)]()+'\x20'+(_0x412ec9?_0x22f822(0x17d):'tcp\x20')+'\x20';if(_0x5e5f07){throw new Error(_0x3b3363);return;}if(_0x412ec9){if(portRemote===0x35)_0x2ca4e0=!![];else{throw new Error(_0x22f822(0x176));return;}}const _0x262727=new Uint8Array([vlessVersion[0x0],0x0]),_0x3cb63b=_0x3d9f75['slice'](_0x559623);if(_0x2ca4e0){const {write:_0x4040b3}=await handleUDPOutBound(_0x4ff6b9,_0x262727,_0x3d11ea);_0x115154=_0x4040b3,_0x115154(_0x3cb63b);return;}handleTCPOutBound(_0x59f309,addressRemote,portRemote,_0x3cb63b,_0x4ff6b9,_0x262727,_0x3d11ea);},'close'(){const _0x30335a=_0x235734;_0x3d11ea(_0x30335a(0x14e));},'abort'(_0x3e905c){const _0x3a657f=_0x235734;_0x3d11ea(_0x3a657f(0x19c),JSON[_0x3a657f(0x15e)](_0x3e905c));}}))['catch'](_0xd6b371=>{const _0xa5af0a=_0x235734;_0x3d11ea(_0xa5af0a(0x188),_0xd6b371);}),new Response(null,{'status':0x65,'webSocket':_0x24e9ae});}async function handleTCPOutBound(_0x2acffc,_0x42dee8,_0x378482,_0x1a5d7f,_0x4a14db,_0x4f85a9,_0x363811){async function _0x597444(_0x420e90,_0x48dc00){const _0x55e876=_0x1c4e,_0x4be835=connect({'hostname':_0x420e90,'port':_0x48dc00});_0x2acffc[_0x55e876(0x16f)]=_0x4be835,_0x363811(_0x55e876(0x1b1)+_0x420e90+':'+_0x48dc00);const _0x17a12b=_0x4be835[_0x55e876(0x158)][_0x55e876(0x1b0)]();return await _0x17a12b[_0x55e876(0x18c)](_0x1a5d7f),_0x17a12b[_0x55e876(0x184)](),_0x4be835;}async function _0x37192f(){const _0xc75bf8=_0x1c4e,_0x2da094=await _0x597444(proxyIP||_0x42dee8,_0x378482);_0x2da094[_0xc75bf8(0x162)][_0xc75bf8(0x172)](_0x75e40e=>{const _0x4b174c=_0xc75bf8;console[_0x4b174c(0x197)](_0x4b174c(0x1a6),_0x75e40e);})['finally'](()=>{safeCloseWebSocket(_0x4a14db);}),remoteSocketToWS(_0x2da094,_0x4a14db,_0x4f85a9,null,_0x363811);}const _0x44248b=await _0x597444(_0x42dee8,_0x378482);remoteSocketToWS(_0x44248b,_0x4a14db,_0x4f85a9,_0x37192f,_0x363811);}function makeReadableWebSocketStream(_0x3c1584,_0xf24dfa,_0x5bdeda){let _0xc809f0=![];const _0x371bae=new ReadableStream({'start'(_0x5a5f75){const _0x3bf31e=_0x1c4e;_0x3c1584[_0x3bf31e(0x193)]('message',_0x496425=>{const _0x48d723=_0x3bf31e;if(_0xc809f0)return;const _0x3f0252=_0x496425['data'];_0x5a5f75[_0x48d723(0x19a)](_0x3f0252);}),_0x3c1584['addEventListener']('close',()=>{const _0x3df107=_0x3bf31e;safeCloseWebSocket(_0x3c1584);if(_0xc809f0)return;_0x5a5f75[_0x3df107(0x181)]();}),_0x3c1584[_0x3bf31e(0x193)]('error',_0x3847fe=>{const _0x593a63=_0x3bf31e;_0x5bdeda(_0x593a63(0x18e)),_0x5a5f75['error'](_0x3847fe);});const {earlyData:_0x533b71,error:_0x4621c1}=base64ToArrayBuffer(_0xf24dfa);if(_0x4621c1)_0x5a5f75[_0x3bf31e(0x1aa)](_0x4621c1);else _0x533b71&&_0x5a5f75['enqueue'](_0x533b71);},'pull'(_0x2206c7){},'cancel'(_0x3cd9bf){if(_0xc809f0)return;_0x5bdeda('ReadableStream\x20was\x20canceled,\x20due\x20to\x20'+_0x3cd9bf),_0xc809f0=!![],safeCloseWebSocket(_0x3c1584);}});return _0x371bae;}function processVlessHeader(_0x3ad819,_0x3727e2){const _0x1d4314=_0x597140;if(_0x3ad819[_0x1d4314(0x1a1)]<0x18)return{'hasError':!![],'message':_0x1d4314(0x180)};const _0x2f077d=new Uint8Array(_0x3ad819['slice'](0x0,0x1));let _0x1f4587=![],_0x3ae907=![];stringify(new Uint8Array(_0x3ad819[_0x1d4314(0x16d)](0x1,0x11)))===_0x3727e2&&(_0x1f4587=!![]);if(!_0x1f4587)return{'hasError':!![],'message':_0x1d4314(0x15d)};const _0x3e7746=new Uint8Array(_0x3ad819[_0x1d4314(0x16d)](0x11,0x12))[0x0],_0x39d416=new Uint8Array(_0x3ad819[_0x1d4314(0x16d)](0x12+_0x3e7746,0x12+_0x3e7746+0x1))[0x0];if(_0x39d416===0x1){}else{if(_0x39d416===0x2)_0x3ae907=!![];else return{'hasError':!![],'message':'command\x20'+_0x39d416+_0x1d4314(0x1ac)};}const _0x1bda7a=0x12+_0x3e7746+0x1,_0x50d917=_0x3ad819[_0x1d4314(0x16d)](_0x1bda7a,_0x1bda7a+0x2),_0x5c7112=new DataView(_0x50d917)[_0x1d4314(0x17a)](0x0);let _0x2c800f=_0x1bda7a+0x2;const _0x281a94=new Uint8Array(_0x3ad819['slice'](_0x2c800f,_0x2c800f+0x1)),_0x59f42d=_0x281a94[0x0];let _0x3c99d7=0x0,_0x407430=_0x2c800f+0x1,_0x26a6a6='';switch(_0x59f42d){case 0x1:_0x3c99d7=0x4,_0x26a6a6=new Uint8Array(_0x3ad819[_0x1d4314(0x16d)](_0x407430,_0x407430+_0x3c99d7))[_0x1d4314(0x18f)]('.');break;case 0x2:_0x3c99d7=new Uint8Array(_0x3ad819[_0x1d4314(0x16d)](_0x407430,_0x407430+0x1))[0x0],_0x407430+=0x1,_0x26a6a6=new TextDecoder()[_0x1d4314(0x171)](_0x3ad819[_0x1d4314(0x16d)](_0x407430,_0x407430+_0x3c99d7));break;case 0x3:_0x3c99d7=0x10;const _0x2f715e=new DataView(_0x3ad819[_0x1d4314(0x16d)](_0x407430,_0x407430+_0x3c99d7)),_0x3128c9=[];for(let _0x57685e=0x0;_0x57685e<0x8;_0x57685e++){_0x3128c9[_0x1d4314(0x187)](_0x2f715e[_0x1d4314(0x17a)](_0x57685e*0x2)[_0x1d4314(0x18d)](0x10));}_0x26a6a6=_0x3128c9[_0x1d4314(0x18f)](':');break;default:return{'hasError':!![],'message':_0x1d4314(0x182)+_0x59f42d};}if(!_0x26a6a6)return{'hasError':!![],'message':_0x1d4314(0x1ab)+_0x59f42d};return{'hasError':![],'addressRemote':_0x26a6a6,'addressType':_0x59f42d,'portRemote':_0x5c7112,'rawDataIndex':_0x407430+_0x3c99d7,'vlessVersion':_0x2f077d,'isUDP':_0x3ae907};}function _0x1c4e(_0x1ba7dd,_0xbfae83){const _0x426387=_0x4263();return _0x1c4e=function(_0x1c4ed1,_0x240112){_0x1c4ed1=_0x1c4ed1-0x14d;let _0x50275c=_0x426387[_0x1c4ed1];return _0x50275c;},_0x1c4e(_0x1ba7dd,_0xbfae83);}async function remoteSocketToWS(_0x7cbb99,_0x4a4447,_0x923aaa,_0x1948f2,_0x3a1518){const _0x2384d1=_0x597140;let _0x50e53d=0x0,_0x1eef7d=[],_0x5cad10=_0x923aaa,_0x20f881=![];await _0x7cbb99[_0x2384d1(0x15a)][_0x2384d1(0x185)](new WritableStream({'start'(){},async 'write'(_0x6c3197,_0x3142f7){const _0x1af0ca=_0x2384d1;_0x20f881=!![],_0x4a4447[_0x1af0ca(0x167)]!==WS_READY_STATE_OPEN&&_0x3142f7[_0x1af0ca(0x1aa)](_0x1af0ca(0x16a)),_0x5cad10?(_0x4a4447[_0x1af0ca(0x1a7)](await new Blob([_0x5cad10,_0x6c3197])[_0x1af0ca(0x173)]()),_0x5cad10=null):_0x4a4447[_0x1af0ca(0x1a7)](_0x6c3197);},'close'(){const _0x808a93=_0x2384d1;_0x3a1518(_0x808a93(0x17f)+_0x20f881);},'abort'(_0x59d633){const _0x109f41=_0x2384d1;console[_0x109f41(0x1aa)]('remoteConnection!.readable\x20abort',_0x59d633);}}))[_0x2384d1(0x172)](_0x21a3ce=>{const _0x4e7a10=_0x2384d1;console[_0x4e7a10(0x1aa)](_0x4e7a10(0x154),_0x21a3ce[_0x4e7a10(0x190)]||_0x21a3ce),safeCloseWebSocket(_0x4a4447);}),_0x20f881===![]&&_0x1948f2&&(_0x3a1518(_0x2384d1(0x169)),_0x1948f2());}function base64ToArrayBuffer(_0xd2943a){const _0x2649e9=_0x597140;if(!_0xd2943a)return{'error':null};try{_0xd2943a=_0xd2943a['replace'](/-/g,'+')[_0x2649e9(0x19d)](/_/g,'/');const _0xe83882=atob(_0xd2943a),_0x44d046=Uint8Array[_0x2649e9(0x152)](_0xe83882,_0x3d35bb=>_0x3d35bb[_0x2649e9(0x192)](0x0));return{'earlyData':_0x44d046['buffer'],'error':null};}catch(_0x34ab59){return{'error':_0x34ab59};}}function _0x4263(){const _0x3f574a=['close','invild\x20\x20addressType\x20is\x20','application/dns-message','releaseLock','pipeTo','values','push','readableWebSocketStream\x20pipeTo\x20error','PROXYIP','412240OmprVz','518600MGAexg','write','toString','webSocketServer\x20has\x20error','join','stack','headers','charCodeAt','addEventListener','translate.com','poe.com','Host','log','jp.ipdb.rr.nu','time.is','enqueue','websim.ai','readableWebSocketStream\x20is\x20abort','replace','sec-websocket-protocol','chatgpt.com','x.ai','byteLength','dns\x20udp\x20has\x20error','\x0a\x20\x20port:\x20443\x0a\x20\x20uuid:\x20','&fp=randomized&type=ws&host=','grok.com','retry\x20tcpSocket\x20closed\x20error','send','2522562tTSHDx','Not\x20found','error','addressValue\x20is\x20empty,\x20addressType\x20is\x20','\x20is\x20not\x20support,\x20command\x2001-tcp,02-udp,03-mux','get','\x0a---------------------------------------------------------------\x0a################################################################\x0aclash-meta\x0a---------------------------------------------------------------\x0a-\x20type:\x20vless\x0a\x20\x20name:\x20','ip.sb','getWriter','connected\x20to\x20','249144lHyQSg','\x0a\x20\x20network:\x20ws\x0a\x20\x20tls:\x20true\x0a\x20\x20udp:\x20false\x0a\x20\x20sni:\x20','readableWebSocketStream\x20is\x20close','kimochi.info','websocket','sg.ipdb.rr.nu','from','proxyip.digitalocean.fxxk.dedyn.io','remoteSocketToWS\x20has\x20exception\x20','vless','accept','\x0a################################################################\x0av2ray\x0a---------------------------------------------------------------\x0a','writable','hgamefree.info','readable','7vmxBPl','random','invalid\x20user','stringify','doh\x20success\x20and\x20dns\x20message\x20length\x20is\x20','?encryption=none&security=tls&sni=','985960ODWQWb','closed','\x0a---------------------------------------------------------------\x0a################################################################\x0a','my.ip.cn','toLowerCase','safeCloseWebSocket\x20error','readyState','402486BLHVtS','retry','webSocket.readyState\x20is\x20not\x20open,\x20maybe\x20close','&path=%2F%3Fed%3D2048#','uuid\x20is\x20not\x20valid','slice','proxyip.oracle.fxxk.dedyn.io','value','\x0a\x20\x20client-fingerprint:\x20chrome\x0a\x20\x20ws-opts:\x0a\x20\x20\x20\x20path:\x20\x22/?ed=2048\x22\x0a\x20\x20\x20\x20headers:\x0a\x20\x20\x20\x20\x20\x20host:\x20','decode','catch','arrayBuffer','https://1.1.1.1/dns-query','POST','UDP\x20proxy\x20only\x20enable\x20for\x20DNS\x20which\x20is\x20port\x2053','proxyip.jp.fxxk.dedyn.io','url','9629811aHKxxQ','getUint16','10oAJrTt','\x0a\x20\x20server:\x20','udp\x20','test','remoteConnection!.readable\x20is\x20close\x20with\x20hasIncomingData\x20is\x20','invalid\x20data'];_0x4263=function(){return _0x3f574a;};return _0x4263();}function isValidUUID(_0x2fd155){const _0x39775e=_0x597140,_0xfed9fd=/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return _0xfed9fd[_0x39775e(0x17e)](_0x2fd155);}const WS_READY_STATE_OPEN=0x1,WS_READY_STATE_CLOSING=0x2;function safeCloseWebSocket(_0x5851d1){const _0x4b0498=_0x597140;try{(_0x5851d1['readyState']===WS_READY_STATE_OPEN||_0x5851d1[_0x4b0498(0x167)]===WS_READY_STATE_CLOSING)&&_0x5851d1['close']();}catch(_0x158985){console['error'](_0x4b0498(0x166),_0x158985);}}const byteToHex=[];for(let i=0x0;i<0x100;++i){byteToHex['push']((i+0x100)['toString'](0x10)[_0x597140(0x16d)](0x1));}function unsafeStringify(_0x401bfe,_0x1a6aa5=0x0){const _0x4e5c94=_0x597140;return(byteToHex[_0x401bfe[_0x1a6aa5+0x0]]+byteToHex[_0x401bfe[_0x1a6aa5+0x1]]+byteToHex[_0x401bfe[_0x1a6aa5+0x2]]+byteToHex[_0x401bfe[_0x1a6aa5+0x3]]+'-'+byteToHex[_0x401bfe[_0x1a6aa5+0x4]]+byteToHex[_0x401bfe[_0x1a6aa5+0x5]]+'-'+byteToHex[_0x401bfe[_0x1a6aa5+0x6]]+byteToHex[_0x401bfe[_0x1a6aa5+0x7]]+'-'+byteToHex[_0x401bfe[_0x1a6aa5+0x8]]+byteToHex[_0x401bfe[_0x1a6aa5+0x9]]+'-'+byteToHex[_0x401bfe[_0x1a6aa5+0xa]]+byteToHex[_0x401bfe[_0x1a6aa5+0xb]]+byteToHex[_0x401bfe[_0x1a6aa5+0xc]]+byteToHex[_0x401bfe[_0x1a6aa5+0xd]]+byteToHex[_0x401bfe[_0x1a6aa5+0xe]]+byteToHex[_0x401bfe[_0x1a6aa5+0xf]])[_0x4e5c94(0x165)]();}function stringify(_0x4ef798,_0x22c327=0x0){const _0x273d13=unsafeStringify(_0x4ef798,_0x22c327);if(!isValidUUID(_0x273d13))throw TypeError('Stringified\x20UUID\x20is\x20invalid');return _0x273d13;}async function handleUDPOutBound(_0x325233,_0x132ee4,_0x5c8d3c){const _0x23e745=_0x597140;let _0x474e74=![];const _0x2fbaab=new TransformStream({'start'(_0x4fd73e){},'transform'(_0x250731,_0xbb3475){const _0x3286ae=_0x1c4e;for(let _0x1dac6b=0x0;_0x1dac6b<_0x250731[_0x3286ae(0x1a1)];){const _0x2dd57a=_0x250731[_0x3286ae(0x16d)](_0x1dac6b,_0x1dac6b+0x2),_0x431e46=new DataView(_0x2dd57a)[_0x3286ae(0x17a)](0x0),_0x12b61e=new Uint8Array(_0x250731[_0x3286ae(0x16d)](_0x1dac6b+0x2,_0x1dac6b+0x2+_0x431e46));_0x1dac6b=_0x1dac6b+0x2+_0x431e46,_0xbb3475[_0x3286ae(0x19a)](_0x12b61e);}},'flush'(_0x4a59fa){}});_0x2fbaab[_0x23e745(0x15a)][_0x23e745(0x185)](new WritableStream({async 'write'(_0x2b81e3){const _0x568f0b=_0x23e745,_0x2168dd=await fetch(_0x568f0b(0x174),{'method':_0x568f0b(0x175),'headers':{'content-type':_0x568f0b(0x183)},'body':_0x2b81e3}),_0x3900c9=await _0x2168dd[_0x568f0b(0x173)](),_0x16a218=_0x3900c9[_0x568f0b(0x1a1)],_0x3e8170=new Uint8Array([_0x16a218>>0x8&0xff,_0x16a218&0xff]);_0x325233[_0x568f0b(0x167)]===WS_READY_STATE_OPEN&&(_0x5c8d3c(_0x568f0b(0x15f)+_0x16a218),_0x474e74?_0x325233[_0x568f0b(0x1a7)](await new Blob([_0x3e8170,_0x3900c9])[_0x568f0b(0x173)]()):(_0x325233[_0x568f0b(0x1a7)](await new Blob([_0x132ee4,_0x3e8170,_0x3900c9])['arrayBuffer']()),_0x474e74=!![]));}}))[_0x23e745(0x172)](_0x1ad630=>{const _0x156eb2=_0x23e745;_0x5c8d3c(_0x156eb2(0x1a2)+_0x1ad630);});const _0x1de350=_0x2fbaab[_0x23e745(0x158)]['getWriter']();return{'write'(_0x215dee){const _0x482ad0=_0x23e745;_0x1de350[_0x482ad0(0x18c)](_0x215dee);}};}function getVLESSConfig(_0x329c56,_0x46e082){const _0x3c61be=_0x597140,_0x47533b=_0x3c61be(0x155),_0x216a29=''+_0x47533b+('://'+_0x329c56+'@'+_0x46e082+':443')+(_0x3c61be(0x160)+_0x46e082+_0x3c61be(0x1a4)+_0x46e082+_0x3c61be(0x16b)+_0x46e082);return _0x3c61be(0x157)+_0x216a29+_0x3c61be(0x1ae)+_0x46e082+_0x3c61be(0x17c)+_0x46e082+_0x3c61be(0x1a3)+_0x329c56+_0x3c61be(0x14d)+_0x46e082+_0x3c61be(0x170)+_0x46e082+_0x3c61be(0x163);}
